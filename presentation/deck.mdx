import { themes, Split } from "mdx-deck";
import { Crawl } from "./components/Crawl";
import { Highlighter } from './components/Highlighter';

import Stats from './assets/total-stats.png';
import AdfenixLeaderboard from "./assets/adfenix-leaderboard.png"
import EvolveLeaderboard from './assets/evolve-leaderboard.png';
import PinballVideo from './assets/pinball.mp4';


export const theme = themes.future;
theme.styles = {
  ...themes.future.styles, 
  li: {
    ...themes.future.styles.li,
    margin:'0.25em'
  }
}


# AoC 2019 🎅

---

<Crawl
  useIntro
  title="Day 1"
  subtitle="The Tyranny of the Rocket Equation"
  paragraphs={[
    "Santa has become stranded at the edge of the Solar System while delivering presents to other planets!",
    "To accurately calculate his position in space, safely align his warp drive, and return to Earth in time to save Christmas, he needs you to bring him measurements from fifty stars.",
    "Collect stars by solving puzzles. Two puzzles will be made available on each day in the Advent calendar; the second puzzle is unlocked when you complete the first. Each puzzle grants one star.",
    "The Elves quickly load you into a spacecraft and prepare to launch.",
    "Good luck!"
  ]}
/>

---

## What?

- Made by [@Eric Wastl](https://github.com/topaz)
- Advent Calendar of _small_ programming puzzles
- Programs complete in seconds (on very old computers)

---

## Stats 🌟🌟

<img src={Stats} alt="Stats" style={{width:'600px'}} />

---

## How did my client do? 🥈

<img src={AdfenixLeaderboard} alt="Adfenix LeaderBoard"  style={{width:'900px'}} />

---

## How did we do? 🥇


<img src={EvolveLeaderboard} alt="Evolve LeaderBoard"  style={{width:'900px'}}/>


---

🔥 = Kinda difficult <br/>
🔥🔥🔥🔥🔥 = Oh wow!

---

## The Calendar

- _Day 1: The Tyranny of the Rocket Equation_
  - Recursion and the rocket equation 🚀🚀
- _Day 2: 1202 Program Alarm_ 
  - **Int Code**: Parse instructions 📖
- _Day 3: Crossed Wires_
  - Vectors crossing ↗️ ↘️

---

- _Day 4: Secure Container_
  - Number validation within a range
- _Day 5: Sunny with a Chance of Asteroids_
  - **Int Code**: Diagnosis of ship 🚀 🏥
  - In Mercury
- _Day 6: Universal Orbit Map_
  - Tree node 🌴

---

- _Day 7: Amplification Circuit_ 🔥🔥
  - **Int Code**: Multi-thread 💻 ➕ 💻
- _Day 8: Space Image Format_
  - Pixel Matrix 📸 📸 📸
- _Day 9: Sensor Boost_
  - **Int Code**: Complete the Int Code Machine
  - Leaving Mars! 

---

- _Day 10: Monitoring Station_ 🔥
  - Trigonometry. Fun with arctan 📐
- _Day 11: Space Police_
  - **Int Code**: Run a Pixel Matrix Program 👮‍♀
- _Day 12: The N-Body Problem_ 🔥🔥🔥
  - Simulated Physics / Periodicity in Chaos 🌞 🌍 🌎

---

- _Day 13: Care Package_ 
  - **Int Code**: Run a Pinball machine 🎮
  - Tons of pixel matrices
- _Day 14: Space Stoichiometry_ 🔥🔥🔥
  - Parsing 📖
  - Cache updates and invalidations 📑
- _Day 15: Oxygen System_
  - **Int Code**: Command a robot in an unknown maze 🤖
  - Propagate a signal through the maze

---

- _Day 16: Flawed Frequency Transmission_ 🔥🔥🔥
  - Fourier Fast Transform <br/> Flawed Frequency Transmission (FFT)
- _Day 17: Set and Forget_
  - **Int Code**: Vector Crossing + Own scripting language
- _Day 18: Many-Worlds Interpretation_ 🔥🔥🔥🔥
  - More mazes, which change as you move 

---

- _Day 19: Tractor Beam_ 🔥
  -  **Int Code**: More matrices, and guessing 🤗
- _Day 20: Donut Maze_ 🔥🔥🔥🔥
  - Multi dimensional mazes! 🍩
- _Day 21: Springdroid Adventure_ 🔥
  - **Int Code**: Videogame, with scripting language 🎮

---

- _Day 22: Slam Shuffle_ 🔥🔥🔥🔥
  - Modulo Arithmetic / Crazyyyy
- _Day 23: Category Six_ 🔥
  - **Int Code**: Networking 💻 📦 💻 📦 💻
- _Day 24: Planet of Discord_ 🔥🔥🔥
  - Game of Life in multi dimensions

---

- Day 25 - I don't know 🙊🎉🙂

---

## Filters

- Amplification Circuit
- The N-Body Problem
- Slam Shuffle
- Christmas itself 🎅

--- 

## Strategy

- Parse
- Abstract
- Attack


---

## The Tyranny of the Rocket Equation (1)

To find the fuel required for a module take its mass:


<Split style={{width:'100%'}}>
<ul style={{listStyle:'none'}}>
  <li>divide by three,</li>
  <li>round down,</li>
  <li>and subtract 2.</li>
</ul>

<Highlighter language="rust" custom={{width:'75%', marginRight:"1em"}} >
{`fn calc_fuel_for_mass(mass: i32) -> i32 {
    (mass / 3) - 2
}`}
</Highlighter>

</Split>

---

## The input

<Split>
  
  Text file with the mass of each module on each line

<Highlighter language="text">
{`143843
144558
116244
117881
138945
97456
58650
117108
92832
65454
134030
96221`}
</Highlighter>

</Split>

---

Process the input file:

<Highlighter language="rust">
  {`fn solve_day_one(filename: &str) -> i32 {
    let masses = fs::read_to_string(filename).expect("Error reading input");
    
    masses
        .split_terminator("\\n")
        .map(|mod_mass| mod_mass.parse::<i32>().unwrap())
        .fold(0, |acc, mod_mass| {
            acc + day_one::calc_fuel_for_mass(mod_mass)
        })
}`}
</Highlighter>

---

<Split>
<div style={{width:"100%", padding:'1em'}}>
  <p style={{textAlign:'center'}}>
    What is the sum of the fuel requirements for all of the modules on your
    spacecraft?
  </p>
</div>

<Highlighter language="rust" custom={{marginRight:'1em'}}>
{`fn main() {
    let args: Vec<String> = env::args().collect();
    let filename = &args[1];
    let result = solve_day_one(filename);
    println!("{}", result);
}`}
</Highlighter>
</Split>

---

## The Tyranny of the Rocket Equation (2)

- Fuel itself requires fuel just like a module. 
- However, that fuel also requires fuel, 
- and that fuel requires fuel, and so on.


----

<Split>

<div style={{width:"100%", padding:'1em'}}>
    <p style={{textAlign:'center'}}>
      What is the sum of the fuel requirements for all
      <br/> of the modules on your spacecraft when also taking into account the mass of the added fuel?
    </p>
</div>
<Highlighter language="rust" custom={{marginRight:'1em'}}>
  {`fn calc_fuel_for_mass(mass: i32) -> i32 {
    (mass / 3) - 2
} \n 
fn calc_fuel_for_mass_and_fuel(mass: i32) -> i32 {
    let fuel = calc_fuel_for_mass(mass);
    
    if fuel <= 0 {
        return 0;
    }
    return fuel + calc_fuel_for_mass_and_fuel(fuel);
}`}
</Highlighter>

</Split>

---

## The N-Body Problem (2)


<ul>
<li>Position of 4 moons. All starting with velocity zero.</li>
<li>How many steps does it take to reach the first <br/> state that exactly matches a previous state?</li>
</ul>

<Highlighter language="text">
  {`<x=13, y=-13, z=-2>
<x=16, y=2, z=-15>
<x=7, y=-18, z=-12>
<x=-3, y=-8, z=-8>`}
</Highlighter>

---

### The N-Body Problem (2)

<Highlighter language="javascript" fontSize="0.325em">
{`const applyGravity = (position, otherMoons, vComponent, axis) => {
  const _axisPos = position[axis];
  const _relAxisPos = otherMoons.map(x => x[0][axis]);
  const change = _relAxisPos.reduce((prev, curr) => {
    if (_axisPos === curr) return prev;
    return _axisPos > curr ? prev - 1 : prev + 1;
  }, 0);\n
  return vComponent + change;
};\n
const newPosition = ([position, velocity], otherMoons) => {
  const _velocity = velocity.map((vComponent, axis) =>
    applyGravity(position, otherMoons, vComponent, axis)
  );
  const _position = _velocity.map(
    (rComponent, axis) => position[axis] + rComponent
  );\n
  return [_position, _velocity];
};`}

</Highlighter>

---

<Highlighter language="javascript" fontSize="0.4em" custom={{margin:"1em"}}>
  {`fs.readFile(
  path.resolve(__dirname, "../", "input/day_twelve.in"),
  "utf-8",
  (err, data) => {
    if (err) return console.log(err);\n
    const initial = [0, 0, 0];\n
    const moons = data
      .split("\\n")
      .map(row =>
        row
          .replace("<", "")
          .replace(">", "")
          .split(",")
          .map(x => parseInt(x.split("=").pop()))
      )
      .map(moon => [moon, initial]);\n
    let last = moons;\n
    let periods = [];\n
    let step = 0;\n
    let [xSnapshots, ySnapshots, zSnapshots] = [new Set(), new Set(), new Set()];\n
    while (periods.filter(x => x).length < 3) {
      const newPositions = last.map((moon, moonIndex) =>
        newPosition(moon, [
          ...last.slice(0, moonIndex),
          ...last.slice(moonIndex + 1)
        ])
      );\n
      const [x, y, z] = [0, 1, 2].map(axis =>
        newPositions.map(([pos, vel]) => \`\${pos[axis]}.\${vel[axis]}\`).join(".")
      );\n
      if (!periods[0] && xSnapshots.has(x)) {
        periods[0] = step;
      } else {
        xSnapshots.add(x);
      }\n
      if (!periods[1] && ySnapshots.has(y)) {
        periods[1] = step;
      } else {
        ySnapshots.add(y);
      }\n
      if (!periods[2] && zSnapshots.has(z)) {
        periods[2] = step;
      } else {
        zSnapshots.add(z);
      }\n
      step = step + 1;
      last = newPositions;
    }
    console.log(periods.reduce(lcm));
  }
);`}
</Highlighter>

---

[LCM](https://www.calculatorsoup.com/calculators/math/lcm.php)

<Highlighter language="javascript">
{`function gcd(a, b) {
  if (!b) return b === 0 ? a : NaN;
  return gcd(b, a % b);
}\n
function lcm(a, b) {
  return (a / gcd(a, b)) * b;
}
`}
</Highlighter>


---

### The N-Body Problem Answer

<Highlighter language="bash">
  {`found z 102356
found y 161428
found x 286332
Answer: 295693702908636\n
1\.36 (secs) real
1\.54 (secs) user
0\.06 (secs) sys
118% CPU
`}
</Highlighter> 

---

## Care Package (2)

<video controls width="500">
    <source src={PinballVideo} type="video/mp4"/>
</video>

---

## Slam Shuffle (2)

- Dev.to [article.](https://dev.to/icyjoseph/advent-of-code-day-22-312b-temp-slug-6762054?preview=c6d8855ace4cb7d9d859c8e70ca6771dc8aecf409214a6dc74e93d9aaaf88f9353677c3cd1c163f2868710eb1bfd845f1ae1e13dc17c878eb0ed8dfa)

---

## Does it help in real life? 🦄🦄

- Step out your coding routine
- Practice breaking down requirements into abstractions
- Explorer your target language
- Practice parsing techniques


---

## What's next?

- Feb 20th: HashCode
- April: CodeJam