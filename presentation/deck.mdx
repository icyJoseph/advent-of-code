import { themes, Split, Horizontal } from "mdx-deck";
import { Crawl } from "./components/Crawl";
import { Highlighter } from './components/Highlighter';

import Stats from './assets/total-stats.png';
import AdfenixLeaderboard from "./assets/adfenix-leaderboard.png"
import EvolveLeaderboard from './assets/evolve-leaderboard.png';
import Day17 from './assets/day17.png';
import Day21 from './assets/day21.png';
import Day22 from './assets/day22.png';
import Day22Notes from './assets/day22-notes.png';
import PinballVideo from './assets/pinball.mp4';

export const theme = themes.future;
theme.styles = {
  ...themes.future.styles, 
  li: {
    ...themes.future.styles.li,
    margin:'0.25em'
  }
}


# AoC 2019 ğŸ…ğŸ„


<blockquote cite="https://codingcompetitions.withgoogle.com/codejam/round/0000000000051635/0000000000104e03" style={{width:"75%", fontSize:'0.75em', fontWeight:'400'}}>
<p style={{marginTop:'0'}}>
Many problems cannot be approached with <strong>random or 
brute-force</strong> solutions, but identifying the problems that 
can be (in Code Jam or the real world) is a <strong>useful skill!</strong>
</p>
<footer>-Ian Tullis, <cite>Code Jam 2019</cite></footer>
</blockquote>

---

<Crawl
  useIntro
  title="Episode I"
  subtitle="The Tyranny of the Rocket Equation"
  paragraphs={[
    "Santa has become stranded at the edge of the Solar System while delivering presents to other planets!",
    "To accurately calculate his position in space, safely align his warp drive, and return to Earth in time to save Christmas, he needs you to bring him measurements from fifty stars.",
    "Collect stars by solving puzzles. Two puzzles will be made available on each day in the Advent calendar; the second puzzle is unlocked when you complete the first. Each puzzle grants one star.",
    "The Elves quickly load you into a spacecraft and prepare to launch.",
    "Good luck!"
  ]}
/>

---

### What?

- Made by [@Eric Wastl](https://github.com/topaz)
- Advent Calendar of _small_ programming puzzles
- Programs complete in seconds (on very old computers)

---

### Stats ğŸŒŸğŸŒŸ

<img src={Stats} alt="Stats" style={{width:'600px'}} />

---

### How did my client do? ğŸ¥ˆ

<img src={AdfenixLeaderboard} alt="Adfenix LeaderBoard"  style={{width:'900px'}} />

---

### How did we do? ğŸ¥‡


<img src={EvolveLeaderboard} alt="Evolve LeaderBoard"  style={{width:'900px'}}/>


---

### The calendar

ğŸ”¥ = Kinda difficult <br/>
ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ = Oh wow!

---

- _Day 1: The Tyranny of the Rocket Equation_
  - Recursion and the rocket equation ğŸš€ğŸš€ 
  - Take off
- _Day 2: 1202 Program Alarm_ 
  - **Int Code**: Learn to parse a program ğŸ“–
  - Arrive at the Moon
- _Day 3: Crossed Wires_
  - Vectors crossing â†—ï¸ â†˜ï¸

---

- _Day 4: Secure Container_
  - Number validation within a range
  - Arrive at Venus
- _Day 5: Sunny with a Chance of Asteroids_
  - **Int Code**: Diagnosis of ship ğŸš€ ğŸ¥
  - Arrive at Mercury
- _Day 6: Universal Orbit Map_
  - Tree node ğŸŒ´

---

- _Day 7: Amplification Circuit_ ğŸ”¥ğŸ”¥
  - **Int Code**: Multi-thread ğŸ’» â• ğŸ’»
- _Day 8: Space Image Format_
  - Pixel Matrix ğŸ“¸ ğŸ“¸ ğŸ“¸ to get a Password
  - Mars!
- _Day 9: Sensor Boost_
  - **Int Code**: Complete the Int Code Machine
  - Leaving Mars! 

---

- _Day 10: Monitoring Station_ ğŸ”¥
  - Trigonometry. Fun with arctan ğŸ“
- _Day 11: Space Police_
  - **Int Code**: Run a Pixel Matrix Program ğŸ‘®â€â™€
  - On Jupiter's orbit
- _Day 12: The N-Body Problem_ ğŸ”¥ğŸ”¥ğŸ”¥
  - Simulated Physics / Periodicity in Chaos ğŸŒ ğŸŒ ğŸŒ

---

- _Day 13: Care Package_ 
  - **Int Code**: Run a Pinball machine ğŸ®
  - Tons of pixel matrices
- _Day 14: Space Stoichiometry_ ğŸ”¥ğŸ”¥ğŸ”¥
  - Cache updates and invalidations ğŸ“‘
  - Rigns of Saturn
- _Day 15: Oxygen System_
  - **Int Code**: Command a robot in an unknown maze ğŸ¤–
  - Propagate a signal through the maze

---

- _Day 16: Flawed Frequency Transmission_ ğŸ”¥ğŸ”¥ğŸ”¥
  - Fourier Fast Transform
  - Matrix tricks
- _Day 17: Set and Forget_
  - **Int Code**: Vector Crossing 
  - Make a scripting language
- _Day 18: Many-Worlds Interpretation_ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
  - More mazes, which change as you move
  - Approaching Neptune

---

- _Day 19: Tractor Beam_ ğŸ”¥
  -  **Int Code**: More matrices, and guessing ğŸ¤—
- _Day 20: Donut Maze_ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
  - More multi dimensional mazes! ğŸ©
  - Pluto (not a planet)
- _Day 21: Springdroid Adventure_ ğŸ”¥
  - **Int Code**: Run another videogame
  - Reuse scripting language ğŸ®

---

- _Day 22: Slam Shuffle_ ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
  - Modulo Arithmetic / Crazyyyy
- _Day 23: Category Six_ ğŸ”¥
  - **Int Code**: Networking ğŸ’» ğŸ“¦ ğŸ’» ğŸ“¦ ğŸ’»
- _Day 24: Planet of Discord_ ğŸ”¥ğŸ”¥ğŸ”¥
  - Game of Life in multi dimensions
  - Eris (also not a planet)
---

- Day 25 - I don't know ğŸ™ŠğŸ‰ğŸ™‚

---

### Filters

- Amplification Circuit
- The N-Body Problem
- Many-Worlds Interpretation
- Donut Maze
- Slam Shuffle
- Christmas itself ğŸ…

--- 

### 1: The Tyranny of the Rocket Equation

---

#### Input

<Highlighter language="text">
{`143843
144558
116244
117881
138945
97456
58650
117108
92832
65454
134030
96221`}
</Highlighter>


---

<p style={{width:'75%'}}>
To find the fuel required for a module take its mass, divide by three, round down, and subtract 2.
</p>

---


<Split>
<div style={{ padding:'1em'}}>
  <p style={{textAlign:'center',margin:'0.5em 2em'}}>
    What is the sum of the fuel requirements for all of the modules on your
    spacecraft?
  </p>
</div>
<Highlighter language="rust" fontSize="0.325em" custom={{margin:'1em'}}>
{`fn calc_fuel_for_mass(mass: i32) -> i32 {
    (mass / 3) - 2
}\n
fn solve_day_one(filename: &str) -> i32 {
    let masses = fs::read_to_string(filename)
    .expect("Error reading input");
    
    masses
        .split_terminator("\\n")
        .map(|mod_mass| mod_mass.parse::<i32>().unwrap())
        .fold(0, |acc, mod_mass| {
            acc + calc_fuel_for_mass(mod_mass)
        })
}\n
fn main() {
  let args: Vec<String> = env::args().collect();
  let filename = &args[1];
  println!("{}", solve_day_one(filename));
}`}
</Highlighter>
</Split>

---

- Fuel itself requires fuel just like a module. 
- However, that fuel also requires fuel, 
- and that fuel requires fuel, and so on.


----

<Split>

<div style={{ padding:'1em'}}>
    <p style={{textAlign:'center',margin:'0.5em 2em'}}>
      What is the sum of the fuel requirements for all
      <br/> of the modules on your spacecraft when also taking into account the mass of the added fuel?
    </p>
</div>
<Highlighter language="rust" fontSize="0.325em" custom={{margin:'1em'}}>
  {`fn calc_fuel_for_mass(mass: i32) -> i32 {
    (mass / 3) - 2
} \n 
fn calc_fuel_for_mass_and_fuel(mass: i32) -> i32 {
    let fuel = calc_fuel_for_mass(mass);
    if fuel <= 0 {
        return 0;
    }
    return fuel + calc_fuel_for_mass_and_fuel(fuel);
}\n
fn solve_day_one(filename: &str) -> i32 {
    let masses = fs::read_to_string(filename)
    .expect("Error reading input");
    
    masses
        .split_terminator("\\n")
        .map(|mod_mass| mod_mass.parse::<i32>().unwrap())
        .fold(0, |acc, mod_mass| {
            acc + calc_fuel_for_mass_and_fuel(mod_mass)
        })
}\n
fn main() {
  let args: Vec<String> = env::args().collect();
  let filename = &args[1];
  println!("{}", solve_day_one(filename));
}
`}
</Highlighter>

</Split>

---

### 12: The N-Body Problem


<ul>
<li>Position of 4 moons. All starting with velocity zero.</li>
<li>How many steps does it take to reach the first <br/> state that exactly matches a previous state?</li>
</ul>

<Highlighter language="text">
  {`<x=13, y=-13, z=-2>
<x=16, y=2, z=-15>
<x=7, y=-18, z=-12>
<x=-3, y=-8, z=-8>`}
</Highlighter>

---

### 12: The N-Body Problem

<Highlighter language="javascript" fontSize="0.325em">
{`const applyGravity = (position, otherMoons, vComponent, axis) => {
  const _axisPos = position[axis];
  const _relAxisPos = otherMoons.map(x => x[0][axis]);
  const change = _relAxisPos.reduce((prev, curr) => {
    if (_axisPos === curr) return prev;
    return _axisPos > curr ? prev - 1 : prev + 1;
  }, 0);\n
  return vComponent + change;
};\n
const newPosition = ([position, velocity], otherMoons) => {
  const _velocity = velocity.map((vComponent, axis) =>
    applyGravity(position, otherMoons, vComponent, axis)
  );
  const _position = _velocity.map(
    (rComponent, axis) => position[axis] + rComponent
  );\n
  return [_position, _velocity];
};`}

</Highlighter>

---

<Highlighter language="javascript" fontSize="0.4em" custom={{margin:"1em"}}>
  {`fs.readFile(
  path.resolve(__dirname, "../", "input/day_twelve.in"),
  "utf-8",
  (err, data) => {
    if (err) return console.log(err);\n
    const initial = [0, 0, 0];\n
    const moons = data
      .split("\\n")
      .map(row =>
        row
          .replace("<", "")
          .replace(">", "")
          .split(",")
          .map(x => parseInt(x.split("=").pop()))
      )
      .map(moon => [moon, initial]);\n
    let last = moons;\n
    let periods = [];\n
    let step = 0;\n
    let [xSnapshots, ySnapshots, zSnapshots] = [new Set(), new Set(), new Set()];\n
    while (periods.filter(x => x).length < 3) {
      const newPositions = last.map((moon, moonIndex) =>
        newPosition(moon, [
          ...last.slice(0, moonIndex),
          ...last.slice(moonIndex + 1)
        ])
      );\n
      const [x, y, z] = [0, 1, 2].map(axis =>
        newPositions.map(([pos, vel]) => \`\${pos[axis]}.\${vel[axis]}\`).join(".")
      );\n
      if (!periods[0] && xSnapshots.has(x)) {
        periods[0] = step;
      } else {
        xSnapshots.add(x);
      }\n
      if (!periods[1] && ySnapshots.has(y)) {
        periods[1] = step;
      } else {
        ySnapshots.add(y);
      }\n
      if (!periods[2] && zSnapshots.has(z)) {
        periods[2] = step;
      } else {
        zSnapshots.add(z);
      }\n
      step = step + 1;
      last = newPositions;
    }
    console.log(periods.reduce(lcm));
  }
);`}
</Highlighter>

---

[LCM](https://www.calculatorsoup.com/calculators/math/lcm.php)

<Highlighter language="javascript">
{`function gcd(a, b) {
  if (!b) return b === 0 ? a : NaN;
  return gcd(b, a % b);
}\n
function lcm(a, b) {
  return (a / gcd(a, b)) * b;
}
`}
</Highlighter>


---

### 12: The N-Body Problem Answer

<Highlighter language="bash">
  {`Found z 102356
Found y 161428
Found x 286332
Answer 295693702908636\n
1\.36 (secs) real
1\.54 (secs) user
0\.06 (secs) sys
118% CPU
`}
</Highlighter> 

---

### 13: Care Package

<Split style={{width:'90%'}}>

<Highlighter language="javascript" fontSize="0.25em">
{`while (1) {
  if (ball.length > 1 && tile && scores.length > 0) {
    drawScreen(canvas);
    const [[x0, y0], [x1, y1]] = ball.map(x => x.map(y => parseInt(y)));
    const [tileX, tileY] = tile.map(x => parseInt(x));
    const xCross =
      x1 + Math.floor(((x1 - x0) * (tileY - y1)) / (y1 - y0)) - 1;\n
    if (y1 > y0) {
      // ball coming down
      if (tileX === xCross) {
        joystick = NEUTRAL;
      } else if (tileX > xCross) {
        joystick = LEFT;
      } else if (tileX < xCross) {
        joystick = RIGHT;
      }
    } else if (y1 < y0) {
      // ball going up
      // follow the ball
      if (x1 > tileX) {
        joystick = RIGHT;
      } else if (x1 <= tileX) {
        joystick = LEFT;
      } else {
        joystick = NEUTRAL;
      }
    }
}`}
</Highlighter>

<video controls width="500">
    <source src={PinballVideo} type="video/mp4"/>
</video>

</Split>

---

### 16: Flawed Frequency Transmission

<Highlighter language="javascript" fontSize="0.4em">
  {`const oneDigit = num =>
Math.abs(num) > 9 ? Math.abs(num) % 10 : Math.abs(num);\n
function decode(output, skip) {
  let result = [];
  const size = output.length;
  let row = size - 1;\n
  while (row >= skip) {
    result[row] = (result[row + 1] || 0) + output[row];
    row = row - 1;
  }\n
  return result.map(oneDigit);
}\n
fs.readFile(
  path.resolve(__dirname, "../", "input/day_sixteen.in"),
  "utf-8",
  (err, data) => {
    if (err) return console.log(err);\n
    const initialInput = data.split("").map(x => parseInt(x));
    const skip = parseInt(initialInput.slice(0, 7).join(""));
    const repeats = 10000;
    const inputs = Array.from({ length: repeats }, () => [
      ...initialInput
    ]).flat();
    let output = [...inputs];
    let phase = 0;\n
    while (phase < 100) {
      console.log({ phase });
      output = decode(output, skip);
      phase = phase + 1;
    }\n
    console.log(output.slice(skip, skip + 8).join(""));
  }
);`}
</Highlighter>

---

### 22: Slam Shuffle

- Dev.to [article.](https://dev.to/icyjoseph/advent-of-code-day-22-312b-temp-slug-6762054?preview=c6d8855ace4cb7d9d859c8e70ca6771dc8aecf409214a6dc74e93d9aaaf88f9353677c3cd1c163f2868710eb1bfd845f1ae1e13dc17c878eb0ed8dfa)

---

## Does it help in real life? ğŸ¦„ğŸ¦„

- Step out your coding routine
- Practice: requirements â¡ï¸ abstractions
- Explore a new language
- Prepare for whiteboard technical interviews

---

#### Found in the wild

<Highlighter language="javascript" fontSize="0.30em">
{`componentDidMount() {
    fetchPokemon().then(res => {
      const allPokemon = res;
      this.setState({
        allPokemon,
        currentPokemon: allPokemon.slice(0, numOfPokemonShowing)
      });
    }).catch(err => { throw err; })
}
onShowMore = () => 
    this.setState(prevState => {
      const startFromIndex = prevState.currentPokemon.length; 
      return {
        currentPokemon: [
          ...prevState.currentPokemon,
          ...prevState.allPokemon.slice(startFromIndex, startFromIndex + numOfPokemonShowing)
        ]
      }
});
renderPokemon = () => (
  this.state.currentPokemon.length > 0 && (
    this.state.currentPokemon.map((pokemon) => <Pokemon key={pokemon.id} {...pokemon}/>)
);`}
</Highlighter>

---

#### Maybe better?

<Highlighter language="javascript" fontSize="0.35em">
{`componentDidMount() {
  fetchPokemon()
    .then(allPokemon => 
      this.setState({
        allPokemon,
      }))
    .catch(() => this.setState({ ...initialState }));
}\n
onShowMore = () => 
    this.setState(prevState => ({
      numOfPokemonShowing: prevState.numOfPokemonShowing + step
}));\n
renderPokemon = () =>
  this.state.allPokemon
    .slice(0, this.state.numOfPokemonShowing)
    .map((item) => (
      <Pokemon key={item.id} {...item}/>
));`}
</Highlighter>

---

<img src={Day17} alt="day17" style={{width:'900px'}}/>


---

<img src={Day21} alt="day-21" style={{width:'900px'}}/>

---

<Split>
<img src={Day22} alt="day22-whiteboard" style={{width:'600px'}}/>
<img src={Day22Notes} alt="day22-notebook" style={{width:'600px'}}/>
</Split>

---


## What's next?

- Feb 20th: [HashCode](https://codingcompetitions.withgoogle.com/hashcode)
- April: [CodeJam](https://codingcompetitions.withgoogle.com/codejam)
- AoC 2020!

> Repo including solutions and slides [here](https://github.com/icyJoseph/advent-of-code).
